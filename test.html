<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSZip Test</title>
</head>
<body>
    <h1>JSZip Test</h1>
    <button id="testExport">Test Export</button>
    <div id="result"></div>

    <script src="jszip.min.js"></script>
    <script>
        document.getElementById('testExport').addEventListener('click', async function() {
            try {
                if (typeof JSZip === 'undefined') {
                    document.getElementById('result').innerHTML = 'JSZip is not loaded';
                    return;
                }
                
                const zip = new JSZip();
                zip.file("test.txt", "Hello World!");
                
                const content = await zip.generateAsync({ type: "blob" });
                document.getElementById('result').innerHTML = 'JSZip is working correctly!';
                
                // Create a download link
                const url = URL.createObjectURL(content);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'test.zip';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            } catch (error) {
                document.getElementById('result').innerHTML = 'Error: ' + error.message;
                console.error('JSZip test error:', error);
            }
        });
        
        console.log('JSZip available:', typeof JSZip !== 'undefined');
    </script>
</body>
</html>