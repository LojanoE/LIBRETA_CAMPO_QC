<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Coordenadas</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, button { padding: 8px; margin: 5px 0; }
        button { background-color: #3498db; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #2980b9; }
        .result { margin-top: 20px; padding: 10px; border: 1px solid #ddd; background-color: #f9f9f9; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.9.0/proj4.js"></script>
</head>
<body>
    <div class="container">
        <h1>Test de Transformación de Coordenadas</h1>
        
        <div class="form-group">
            <label for="lat">Latitud (WGS84):</label>
            <input type="number" id="lat" step="any" placeholder="Ej: -12.04318" value="-12.04318">
        </div>
        
        <div class="form-group">
            <label for="lon">Longitud (WGS84):</label>
            <input type="number" id="lon" step="any" placeholder="Ej: -77.02824" value="-77.02824">
        </div>
        
        <button id="convert-btn">Convertir a UTM</button>
        
        <div class="result" id="result">
            <p>Los resultados aparecerán aquí...</p>
        </div>
    </div>

    <script>
        // Definir los sistemas de coordenadas
        proj4.defs("EPSG:4326", "+proj=longlat +datum=WGS84 +no_defs");
        proj4.defs("EPSG:24877", "+proj=utm +zone=17 +south +ellps=intl +datum=PSAD56 +units=m +no_defs +towgs84=-288,175,-376,0,0,0,0");

        function convert_coords(lat, lon) {
            // Transformar las coordenadas
            var coords = proj4("EPSG:4326", "EPSG:24877", [lon, lat]);
            return {
                easting: coords[0],
                northing: coords[1]
            };
        }

        document.getElementById('convert-btn').addEventListener('click', function() {
            const lat = parseFloat(document.getElementById('lat').value);
            const lon = parseFloat(document.getElementById('lon').value);
            
            if (isNaN(lat) || isNaN(lon)) {
                document.getElementById('result').innerHTML = '<p style="color: red;">Por favor ingrese valores válidos para latitud y longitud.</p>';
                return;
            }
            
            const result = convert_coords(lat, lon);
            
            document.getElementById('result').innerHTML = `
                <h3>Resultados de Transformación:</h3>
                <p><strong>Coordenadas UTM (EPSG:24877):</strong></p>
                <p>Easting: ${result.easting.toFixed(3)}</p>
                <p>Northing: ${result.northing.toFixed(3)}</p>
            `;
        });
    </script>
</body>
</html>